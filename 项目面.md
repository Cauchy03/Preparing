## ç§»åŠ¨ç«¯é€‚é…

```
é¦–å…ˆæ˜¯è¿™ä¸ªåª’ä½“æŸ¥è¯¢ï¼Œä¼šæ ¹æ®ä¸åŒçš„å±å¹•å°ºå¯¸å¤§å°æ˜¾ç¤ºä¸åŒcssæ ·å¼ï¼Œä½†æ²¡å¤šä¸€ä¸ªå±å¹•å°ºå¯¸ï¼Œå°±ä¼šå¤šä¸€ä¸ª@mediaæŸ¥è¯¢å—ï¼Œä¸»è¦ç”¨äºä¸€äº›æç«¯æƒ…å†µï¼Œæ¯”å¦‚ipadå¤§å±æˆ–ä¸€äº›ç®€å•çš„é€‚é…ã€‚
ç„¶åæ˜¯è¿™ä¸ªremé€‚é…ï¼Œremæ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ï¼Œç›¸å¯¹äºæ ¹å…ƒç´ çš„font-sizeçš„å€¼ï¼Œflexible.jsä¸€ä¸ªé˜¿é‡Œæ—©æœŸçš„å¼€æºç§»åŠ¨é€‚é…åº“ï¼Œå°±æ˜¯é‡‡ç”¨remé€šè¿‡jsæ¨¡æ‹Ÿvwçš„ç‰¹æ€§è¿›è¡Œé€‚é…ï¼Œä½†æ˜¯remå’Œæ ¹å…ƒç´ font-sizeçš„å€¼å¼ºè€¦åˆï¼Œç³»ç»Ÿå­—ä½“å¤§å°æ”¾å¤§æˆ–ç¼©å°çš„æ—¶å€™å¯èƒ½ä¼šå¯¼è‡´å¸ƒå±€é”™ä¹±ã€‚
ç„¶åæ˜¯vw/vhé€‚é…ï¼Œç›¸å¯¹å•ä½ï¼Œæ ¹æ®å¯è§†åŒ–çª—å£çš„ç™¾åˆ†å æ¯”ï¼Œä½†ä¸%åˆæœ‰æ‰€åŒºåˆ«ï¼Œ%ç›¸å¯¹äºçˆ¶å…ƒç´ ï¼Œè€Œvw/vhç›¸å¯¹äºå¯è§†åŒ–çª—å£ï¼Œä¸»è¦å°±æ˜¯å…¼å®¹æ€§çš„é—®é¢˜ã€‚å¯ä»¥é€šè¿‡ postcss-px-to-viewport æ’ä»¶ï¼Œå°†pxè‡ªåŠ¨è½¬ä¸ºvw/vh
```

## RBACæƒé™ç®¡ç†

[ä¸‡å­—é•¿æ–‡~vue+express+mysqlå¸¦ä½ å½»åº•ææ‡‚é¡¹ç›®ä¸­çš„æƒé™æ§åˆ¶ï¼ˆé™„æ‰€æœ‰æºç ï¼‰ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7188808031801442363#heading-0)

```
RBACæ„ä¸ºåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼Œæ˜¯ä¸€ä¸ªæƒé™è®¾è®¡æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯è¯´æ ¹æ®ä¸åŒçš„ç”¨æˆ·è§’è‰²ï¼Œæœ‰ä¸åŒçš„æƒé™æ§åˆ¶ã€‚

ç»™å‘˜å·¥é…ç½®è§’è‰² ï¼ˆä¸€ä¸ªå‘˜å·¥å¯ä»¥æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼‰
ç»™è§’è‰²é…ç½®æƒé™ç‚¹ ï¼ˆä¸€ä¸ªè§’è‰²å¯ä»¥æœ‰å¤šä¸ªæƒé™ç‚¹ï¼‰
å‘˜å·¥åªè¦æœ‰äº†è§’è‰²ä¹‹åï¼Œå°±è‡ªåŠ¨æ‹¥æœ‰äº†è§’è‰²ç»‘å®šçš„æ‰€æœ‰æƒé™ç‚¹
```

æ ¹æ®æƒé™è®¾è®¡æ€æƒ³å¯¹åº”ä¸šåŠ¡æ¨¡å—

- å‘˜å·¥ç®¡ç†
- è§’è‰²ç®¡ç†
- æƒé™ç‚¹ç®¡ç†ï¼ˆå®ƒæ˜¯æ²¡æœ‰è°ƒæ•´çš„ä½™åœ°çš„ï¼šå®ƒä¼šä¸¥æ ¼ä¸å½“å‰ç³»ç»Ÿçš„åŠŸèƒ½å¯¹åº”ï¼ï¼‰

### èœå•æƒé™ç®¡ç†

```
å°†è·¯ç”±åˆ†ä¸ºå¸¸é‡è·¯ç”±ä¹Ÿå°±æ˜¯å…±äº«è·¯ç”±ï¼Œå¼‚æ­¥è·¯ç”±æ¶‰åŠæƒé™çš„è·¯ç”±ï¼Œåœ¨metaæ ‡ç­¾ä¸­è®¾ç½®ä¸€ä¸ªrouteIDï¼Œæ ¹æ®è¿”å›å›æ¥çš„è·¯ç”±è¡¨è¿›è¡Œä¸€ä¸ªåŒ¹é…æŸ¥è¯¢ï¼Œæœ€åå°†å¸¸é‡è·¯ç”±å’Œå¼‚æ­¥è·¯ç”±è¿›è¡Œä¸€ä¸ªåˆå¹¶ï¼Œåœ¨é€šè¿‡router.addroutes()æ·»åŠ æœ€ç»ˆçš„è·¯ç”±ã€‚å°†æœ€ç»ˆçš„è·¯ç”±å­˜åœ¨vuexä¸­ï¼Œç„¶ååŠ¨æ€æ¸²æŸ“å·¦ä¾§çš„èœå•
```

```js
// è®¡ç®—å¼‚æ­¥è·¯ç”±å±æ€§
function computeRoutes(asyncRoutes, routes) {
    return asyncRoutes.filter(item => {
        // åˆ¤æ–­ä¸€çº§è·¯ç”±
        if (routes.indexOf(item.name) !== -1) {
            // é€’å½’ éå†å­è·¯ç”±
            if (item.children && item.children.length) {
                item.children = computeRoutes(item.children, routes)
            }
            return true
        }
    })
}
```

```js
state.resultAsyncRoutes = asyncRoutes
// åªåŒ…å«å¼‚æ­¥è·¯ç”±ï¼Œè¿˜éœ€åˆå¹¶å¸¸é‡è·¯ç”±å’Œä»»æ„è·¯ç”±
state.resultRoutes = constantRoutes.concat(state.resultAsyncRoutes, anyRoutes)
// routeræ·»åŠ è·¯ç”±
router.addRoutes(state.resultRoutes)
```

### é¡µé¢ä¸­æ§åˆ¶æŒ‰é’®æƒé™

```js
// è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ v-allow
// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-allow`
Vue.directive('allow', {
    inserted: function(el, binding) {
        // ä»vuexä¸­å–å‡ºpoints,
        const points = store.state.user.userInfo.roles.points
        // å¦‚æœpointsæœ‰binding.valueåˆ™æ˜¾ç¤º
        if (points.includes(binding.value)) {
            // console.log('åˆ¤æ–­è¿™ä¸ªå…ƒç´ æ˜¯å¦ä¼šæ˜¾ç¤º', el, binding.value)
        } else {
            el.parentNode.removeChild(el)
            // el.style.display = 'none'
        }
    }
})
```

```html
<el-button
           v-allow="'import_employee'"
           type="warning"
           size="small"
           @click="$router.push('/import')"
           >å¯¼å…¥excel</el-button>
```

### ä¸€äº›BUG

#### åˆ·æ–°é¡µé¢æ—¶å‡ºç°404

åŠ¨æ€æ·»åŠ è·¯ç”±å 404çš„ä½ç½®ä¸æ˜¯è·¯ç”±çš„æœ«å°¾äº† æŠŠ404é¡µé¢æ”¹åˆ°æœ€æœ«å°¾

ä»route/index.jsä¸­çš„é™æ€è·¯ç”±ä¸­åˆ é™¤`path:'*'`è¿™ä¸€é¡¹

```js
// ä¸éœ€è¦ç‰¹æ®Šçš„æƒé™æ§åˆ¶å°±å¯ä»¥è®¿é—®çš„é¡µé¢
export const constantRoutes = [
    {
        path: '/login',
        component: () => import('@/views/login/index'),
        hidden: true
    },
    // 404 page must be placed at the end !!!
    { path: '*', redirect: '/404', hidden: true }
]
```

åœ¨è·¯ç”±å®ˆå«ä¸­æœ€åæ·»åŠ åˆ°è¿‡æ»¤çš„è·¯ç”±æ•°ç»„ä¸­

```js
if (!store.getters.userId) {
    // ....
    const filterRoutes = asyncRoutes.filter(route => {
        const routeName = route.children[0].name
        return menus.includes(routeName)
    })

    // ä¸€å®šè¦åœ¨è¿›å…¥ä¸»é¡µä¹‹å‰å»è·å–ç”¨æˆ·ä¿¡æ¯
    // æŠŠ404åŠ åˆ°æœ€åä¸€æ¡
    filterRoutes.push( // 404 page must be placed at the end !!!
        { path: '*', redirect: '/404', hidden: true })

    // addRoutesç”¨æ¥åŠ¨æ€æ·»åŠ è·¯ç”±é…ç½®
    // åªæœ‰åœ¨è¿™é‡Œè®¾ç½®äº†è¡¥å……äº†è·¯ç”±é…ç½®ï¼Œæ‰å¯èƒ½å»è®¿é—®é¡µé¢
    // å®ƒä»¬ä¸ä¼šå‡ºç°å·¦ä¾§
    router.addRoutes(filterRoutes)
    // ...
} 
```

#### å¯¹äºaddRoutesæ·»åŠ çš„è·¯ç”±ï¼Œåœ¨åˆ·æ–°æ—¶ä¼šç™½å±

åœ¨`addRoutes()`ä¹‹åç¬¬ä¸€æ¬¡è®¿é—®è¢«æ·»åŠ çš„è·¯ç”±ä¼šç™½å±ï¼Œè¿™æ˜¯å› ä¸ºåˆšåˆš`addRoutes()`å°±ç«‹åˆ»è®¿é—®è¢«æ·»åŠ çš„è·¯ç”±ï¼Œç„¶è€Œæ­¤æ—¶`addRoutes()`æ²¡æœ‰æ‰§è¡Œç»“æŸï¼Œå› è€Œæ‰¾ä¸åˆ°åˆšåˆšè¢«æ·»åŠ çš„è·¯ç”±å¯¼è‡´ç™½å±ã€‚å› æ­¤éœ€è¦ä»æ–°è®¿é—®ä¸€æ¬¡è·¯ç”±æ‰è¡Œã€‚

```js
if (!store.getters.userId) {
    // çœç•¥å…¶ä»–...

    // è§£å†³åˆ·æ–°å‡ºç°çš„ç™½å±bug
    next({
        ...to, // next({ ...to })çš„ç›®çš„,æ˜¯ä¿è¯è·¯ç”±æ·»åŠ å®Œäº†å†è¿›å…¥é¡µé¢ (å¯ä»¥ç†è§£ä¸ºé‡è¿›ä¸€æ¬¡)
        replace: true // é‡è¿›ä¸€æ¬¡, ä¸ä¿ç•™é‡å¤å†å²
    })
} else {
    next()
}
```

[(7æ¡æ¶ˆæ¯) VUE è·¯ç”±å®ˆå« next() / next({ ...to, replace: true }) / next(â€˜/â€˜) è¯´æ˜_Incimoçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_41912398/article/details/109231418?spm=1001.2014.3001.5506)

#### é€€å‡ºç™»å½•æ—¶é‡ç½®è·¯ç”±

é€€å‡ºåï¼Œå†æ¬¡ç™»é™†ï¼Œå‘ç°èœå•å¼‚å¸¸ ï¼ˆæ§åˆ¶å°æœ‰è¾“å‡ºè¯´è·¯ç”±é‡å¤ï¼‰

![img](https://img-blog.csdnimg.cn/20210706024556428.png)

åŸå› :

è·¯ç”±è®¾ç½®æ˜¯é€šè¿‡`router.addRoutes(filterRoutes)`æ¥æ·»åŠ çš„ï¼Œé€€å‡ºæ—¶ï¼Œå¹¶æ²¡æœ‰æ¸…ç©ºï¼Œå†æ¬¡ç™»é™†ï¼ŒåˆåŠ äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥æœ‰é‡å¤ã€‚

éœ€è¦å°†è·¯ç”±æƒé™é‡ç½® (æ¢å¤é»˜è®¤) å°†æ¥ç™»å½•åå†æ¬¡è¿½åŠ æ‰å¯ä»¥ï¼Œä¸ç„¶çš„è¯ï¼Œå°±ä¼šé‡å¤æ·»åŠ 

åœ¨router/index.jsä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³• è¿™ä¸ªæ–¹æ³•å°†è·¯ç”±é‡æ–°å®ä¾‹åŒ–

```js
// é‡ç½®è·¯ç”±
export function resetRouter() {
    const newRouter = createRouter()
    router.matcher = newRouter.matcher // é‡æ–°è®¾ç½®è·¯ç”±çš„å¯åŒ¹é…è·¯å¾„
}
```

é€€å‡ºçš„æ—¶å€™è°ƒç”¨è¿™ä¸ªæ–¹æ³•

```js
import { resetRouter } from '@/router'
// é€€å‡ºçš„actionæ“ä½œ
logout(context) {
    // 1. ç§»é™¤vuexä¸ªäººä¿¡æ¯
    context.commit('removeUserInfo')
    // 2. ç§»é™¤tokenä¿¡æ¯
    context.commit('removeToken')
    // 3. é‡ç½®è·¯ç”±
    resetRouter()
}
```

## axioså…·ä½“å°è£…

```js
// åˆ›å»ºä¸€ä¸ªå®ä¾‹
const service = axios.create({
    baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url
    // withCredentials: true, // å½“è·¨åŸŸè¯·æ±‚æ—¶å‘é€cookie
    timeout: 5000 // request timeout
})

// è¯·æ±‚æ‹¦æˆªå™¨
service.interceptors.request.use(config => {
    if (store.getters.token) {
        // å¦‚æœæºå¸¦token åœ¨å“åº”å¤´è®¾ç½®(ä¸åç«¯å•†é‡)  
        config.headers['token'] = getToken()
    }
    return config
}, error => {
    console.log(error)
    return Promise.reject(error)
})

// å“åº”æ‹¦æˆªå™¨
service.interceptors.response.use(
    /**
   * å¦‚æœä½ æƒ³è·å–httpä¿¡æ¯ï¼Œå¦‚è¯·æ±‚å¤´æˆ–çŠ¶æ€
   * å¯ä»¥return  response => response
  */
    /**
   * é€šè¿‡è‡ªå®šä¹‰ä»£ç ç¡®å®šè¯·æ±‚çŠ¶æ€
   * ä¹Ÿå¯ä»¥é€šè¿‡HTTPçŠ¶æ€ç æ¥åˆ¤æ–­çŠ¶æ€
   */
    response => {
        const res = response.data
        // æœåŠ¡å™¨å“åº”å¤±è´¥çš„å›è°ƒ codeçš„å€¼å¯èƒ½æ˜¯200ä¹Ÿå¯èƒ½20000
        if (res.code !== 20000 && res.code !== 200) {
            Message({
                message: res.message || 'Error',
                type: 'error',
                duration: 5 * 1000
            })

            // 50008: éæ³•çš„token; 50012: å·²ç™»å½•çš„å…¶ä»–å®¢æˆ·ç«¯; 50014: tokenè¿‡æœŸ;
            if (res.code === 50008 || res.code === 50012 || res.code === 50014) {
                // é‡æ–°ç™»å½•
                // You have been logged out, you can cancel to stay on this page, or log in again
                MessageBox.confirm('æ‚¨å·²ç™»å‡ºï¼Œæ‚¨å¯ä»¥å–æ¶ˆä»¥ç•™åœ¨æ­¤é¡µé¢ï¼Œæˆ–é‡æ–°ç™»å½•', 'ç¡®è®¤æ³¨é”€', {
                    confirmButtonText: 'é‡æ–°ç™»å½•',
                    cancelButtonText: 'å–æ¶ˆ',
                    type: 'warning'
                }).then(() => {
                    store.dispatch('user/resetToken').then(() => {
                        location.reload()
                    })
                })
            }
            return Promise.reject(new Error(res.message || 'Error'))
        } else {
            // ç›¸åº”æˆåŠŸçš„å›è°ƒ
            return res
        }
    },
    error => {
        console.log('err' + error) // for debug
        Message({
            message: error.message,
            type: 'error',
            duration: 5 * 1000
        })
        return Promise.reject(error)
    }
)
```

### ç”¨è¿‡fetchå—?fetchå’Œaxiosçš„åŒºåˆ«çŸ¥é“å—?

**1ã€æœ€å¤§çš„ä¸åŒ:**

**æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºFetchæ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œè€ŒAxioséœ€è¦å¼•å…¥Axiosåº“ã€‚**

**2ã€å…¼å®¹æ€§æ–¹é¢**

Axioså¯ä»¥å…¼å®¹IEæµè§ˆå™¨ï¼Œè€Œ**Fetchåœ¨IEæµè§ˆå™¨å’Œä¸€äº›è€ç‰ˆæœ¬æµè§ˆå™¨ä¸Šæ²¡æœ‰å—åˆ°æ”¯æŒ**ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªåº“å¯ä»¥è®©è€ç‰ˆæœ¬æµè§ˆå™¨æ”¯æŒFetchå³å®ƒå°±æ˜¯whatwg-fetchï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨Fetchï¼Œå¹¶ä¸”ç°åœ¨å¾ˆå¤šç½‘ç«™çš„å¼€å‘éƒ½ä¸ºäº†å‡å°‘æˆæœ¬è€Œé€‰æ‹©ä¸å†å…¼å®¹IEæµè§ˆå™¨ã€‚

**3ã€å“åº”è¶…æ—¶**

Axiosçš„ç›¸åº”è¶…æ—¶è®¾ç½®æ˜¯éå¸¸ç®€å•çš„ï¼Œç›´æ¥è®¾ç½®timeoutå±æ€§å°±å¯ä»¥äº†ï¼Œè€ŒFetchè®¾ç½®èµ·æ¥å°±è¿œæ¯”Axioséº»çƒ¦ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººæ›´å–œæ¬¢Axiosè€Œä¸å¤ªå–œæ¬¢Fetchçš„åŸå› ä¹‹ä¸€ã€‚

**4ã€å¯¹æ•°æ®çš„è½¬æ¢**

Axiosè¿˜æœ‰éå¸¸å¥½çš„ä¸€ç‚¹å°±æ˜¯ä¼šè‡ªåŠ¨å¯¹æ•°æ®è¿›è¡Œè½¬åŒ–ï¼Œè€ŒFetchåˆ™ä¸åŒï¼Œå®ƒéœ€è¦ä½¿ç”¨è€…è¿›è¡Œæ‰‹åŠ¨è½¬åŒ–ã€‚

**5ã€æ‹¦æˆªå™¨**

Fetchæ²¡æœ‰æ‹¦æˆªå™¨åŠŸèƒ½ï¼Œä½†æ˜¯è¦å®ç°è¯¥åŠŸèƒ½å¹¶ä¸éš¾ï¼Œç›´æ¥é‡å†™å…¨å±€Fetchæ–¹æ³•å°±å¯ä»¥åŠåˆ°ã€‚

## å›¾ç‰‡æ‡’åŠ è½½æ‰‹åŠ¨å°è£…

```
æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨IntersectionObserver APIå°è£…v-lazyè‡ªå®šä¹‰æŒ‡ä»¤å®ç°å›¾ç‰‡æ‡’åŠ è½½
```

- é€šè¿‡onscrolläº‹ä»¶**ï¼ˆæ€§èƒ½ä¸å¥½ï¼‰**
- é€šè¿‡intersectionObserver API**ï¼ˆå…¼å®¹æ€§å·®ï¼‰**

onscrolläº‹ä»¶

```
ç»™å›¾ç‰‡å…ƒç´ è®¾ç½®ä¸€ä¸ªsrcå±æ€§å­˜å‚¨é»˜è®¤å›¾ç‰‡ï¼Œå†è®¾ç½®ä¸€ä¸ªdata-srcè‡ªå®šä¹‰å±æ€§å­˜å‚¨çœŸæ­£çš„ç›®æ ‡å›¾ç‰‡ï¼Œé€šè¿‡ç›‘å¬ä¸€ä¸ªscrolläº‹ä»¶ï¼Œå½“å›¾ç‰‡å…ƒç´ å‡ºç°åœ¨å¯è§†åŒºåŸŸï¼Œå°†data-srcèµ‹å€¼ç»™srcã€‚ä½†ç”±äºä¸€ç›´ç›‘å¬scrolläº‹ä»¶ï¼Œä¼šå‡ºç°æ€§èƒ½æŸè€—ï¼Œå¯ä»¥é€šè¿‡é˜²æŠ–å‡½æ•°è¿›è¡Œä¼˜åŒ–
```

```html
<img src="default.jpg"
     data-src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/dd45c44ce639350dae9b.jpg~tplv-t2oaga2asx-zoom-crop-mark:1512:1512:1512:851.awebp">
</body>
```

```js
let img = document.querySelector('img')
lazyLoad() // é¡µé¢åŠ è½½å…ˆè°ƒç”¨ä¸€æ¬¡
// ç»‘å®šscrolläº‹ä»¶
window.onscroll = debounce(function lazyLoad() {
    console.log('æ»šåŠ¨äº‹ä»¶è§¦å‘');
    // å¯è§†åŒ–åŒºåŸŸ
    let seeHeight = document.documentElement.clientHeight
    // æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨çš„ä½ç½®
    let scrollTop = document.documentElement.scrollTop || document.body.scrollTop

    // åˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥å¯è§†åŒº
    if (img.offsetTop < seeHeight + scrollTop) {
        if (img.getAttribute('src') === 'default.jpg') {
            console.log('æ‡’åŠ è½½æˆåŠŸï¼ï¼ï¼')
            // å°†imgçš„data-srcèµ‹å€¼ç»™çœŸæ­£çš„src
            img.src = img.getAttribute('data-src')
        }
    }
}, 1000) // ç»‘å®šscrolläº‹ä»¶



// scrolläº‹ä»¶è§¦å‘é¢‘ç¹ï¼Œéœ€è¿›è¡Œé˜²æŠ–ä¼˜åŒ–
function debounce(fn, delay) {
    let timer = null
    return function () {
        // ä¿å­˜thisæŒ‡å‘å’Œä¼ å…¥å‚æ•°
        let context = this
        let args = arguments
        if (timer) {
            // å¦‚æœæ­¤æ—¶å­˜åœ¨å®šæ—¶å™¨çš„è¯ï¼Œåˆ™å–æ¶ˆä¹‹å‰çš„å®šæ—¶å™¨é‡æ–°è®°æ—¶
            clearTimeout(timer)
            timer = null
        }
        // è®¾ç½®å®šæ—¶å™¨ï¼Œä½¿äº‹ä»¶é—´éš”æŒ‡å®šäº‹ä»¶åæ‰§è¡Œ
        timer = setTimeout(() => {
            fn.apply(context, args)
        }, delay)
    }
}
}
```

intersectionObserver API

[Vue2 ä¸­è‡ªå®šä¹‰å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ 2.0 - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7146659891300532232)

```
IntersectionObserver æ˜¯ä¸€ä¸ªæ–°å¢çš„APIï¼Œå¯ä»¥è·å–ç›®æ ‡å…ƒç´ äºç¥–å…ˆå…ƒç´ æˆ–è€…viewportç›¸äº¤æƒ…å†µå˜åŒ–ã€‚é€šè¿‡newä¸€ä¸ª intersectionObserver åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œè°ƒç”¨observeæ–¹æ³•å¯¹ç›®æ ‡å…ƒç´ è¿›è¡Œä¸€ä¸ªç›‘å¬ã€‚newçš„æ—¶å€™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰entryå¯¹è±¡çš„æ•°ç»„ï¼Œå¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œå½“ç›®æ ‡entryå‡ºç°åœ¨å¯è§†åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨isintersectingè¿›è¡Œåˆ¤æ–­ï¼Œå†å°†ç›®æ ‡å›¾ç‰‡æ›¿æ¢é»˜è®¤çš„å›¾ç‰‡å¹¶è°ƒç”¨unobserveè¿›è¡Œå–æ¶ˆç›‘å¬ã€‚

åœ¨vueè‡ªå®šä¹‰æŒ‡ä»¤ä¸­ï¼Œä¸»è¦æ˜¯ç”¨äº†ä¸¤ä¸ªé’©å­ï¼Œinsertedå’Œunbindï¼Œinsertedä¸­å›¾ç‰‡å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£æ—¶åˆå§‹åŒ–å¼€å¯ç›‘å¬ï¼Œunbindè§£ç»‘æ—¶å–æ¶ˆç›‘å¬
```

```html
<div id="app">
    <img v-lazy="defaultImg"
         data-src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/dd45c44ce639350dae9b.jpg~tplv-t2oaga2asx-zoom-crop-mark:1512:1512:1512:851.awebp">
    <img v-lazy="defaultImg"
         data-src="https://tse1-mm.cn.bing.net/th/id/OIP-C.30Ri-r8Y7dBxlWeaX4o35QHaE2?w=243&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7">
    <img v-lazy="defaultImg"
         data-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.a_2XJOKnYxsnGU-tYazCWwHaF7?w=196&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7">
    <img v-lazy="defaultImg"
         data-src="https://tse4-mm.cn.bing.net/th/id/OIP-C.2IRCeI7lpFjVDkDwqMseBQHaEo?w=277&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7">
</div>
```

```js
new Vue({
    el: '#app',
    data() {
        return {
            defaultImg: 'default.jpg', // é»˜è®¤å›¾ç‰‡
        };
    },
    directives: {
        lazy: {
            inserted(el, binding) {
                const io = new IntersectionObserver((entries) => {
                    console.log(entries);
                    entries.forEach(item => {
                        // åˆ¤æ–­æ˜¯å¦è¿›å…¥å¯è§†åŒºåŸŸ
                        if (item.isIntersecting) {
                            item.target.src = item.target.dataset.src
                            // å–æ¶ˆç›‘å¬
                            io.unobserve(item.target)
                        }
                    })
                })

                // å°†ç»‘å®šçš„å…ƒç´ è®¾ç½®src
                el.src = binding.value
                // å¼€å¯ç›‘å¬å¯¹åº”å…ƒç´ 
                io.observe(el)

            },
            unbind(el, binding, vnode) {
                // å–æ¶ˆç›‘å¬
                io.unobserve(el)
            },
        }
    }
})
```

## è™šæ‹Ÿåˆ—è¡¨

[æ‘¸é±¼ä¸¤å¤©ï¼Œå½»åº•æ‹¿ä¸‹è™šæ‹Ÿæ»šåŠ¨ï¼ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7211088034179366973?searchId=202307181402159253F2A90269DEA1D8FA#heading-10)

æ ¸å¿ƒæ­¥éª¤ï¼š

```html
<div class="scroll-container" ref="scrollContainer" @scroll="handleScroll">
    <div class="content-container">
        <div class="content-item"></div>
        ...
        <div class="content-item"></div>
    </div>
</div>
```

> ç»™å¤–å±‚å®¹å™¨ç»‘å®šä¸€ä¸ªscrolläº‹ä»¶ï¼Œè®¾ç½®å¼€å§‹å’Œç»“æŸçš„ç´¢å¼•å€¼ç”¨äºåœ¨æ»šåŠ¨æ—¶è·å–éœ€è¦æ¸²æŸ“æ•°æ®çš„åŒºé—´ã€‚å†è·å–å½“å‰æ»šåŠ¨ä½ç½®åˆ°é¡¶éƒ¨çš„scrollTopå€¼æ¥è®¡ç®—å¼€å§‹å’Œç»“æŸçš„ç´¢å¼•
>
> ```js
> const scrollTop = scrollContainer.value.scrollTop;
> startIndex.value = Math.floor(scrollTop / itemHeight);
> endIndex.value = Math.ceil((scrollTop + viewPortHeight) / itemHeight) - 1;
> ```
>
> è·å–åˆ°éœ€è¦æ¸²æŸ“çš„æ•°æ®åŒºé—´ç”¨sliceè¿›è¡Œæˆªå–
>
> ```js
> const renderDataList = ref(dataSource.slice(startIndex.value, endIndex.value + 1))
> ```

## éª¨æ¶å±åŸç†

```
åœ¨æ¨¡æ¿index.htmlä¸­æœ‰ä¸€ä¸ªidä¸ºappçš„divï¼Œvueçš„$mountå®è´¨æ˜¯é€šè¿‡æ›¿æ¢è¿™ä¸ªdivå…ƒç´ 
```

æ–¹æ¡ˆä¸€ï¼šåœ¨`<div id='app'></div>`ä¸­æ·»åŠ éª¨æ¶ï¼Œç¨‹åºæ¸²æŸ“åå°±ç›´æ¥è¿›è¡Œæ›¿æ¢

æ–¹æ¡ˆäºŒï¼šåˆ©ç”¨base64çš„å›¾ç‰‡ä½œä¸ºéª¨æ¶å±ï¼Œå°ç±³å•†åŸçš„ç§»åŠ¨ç«¯é¡µé¢é‡‡ç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ³•

æ–¹æ¡ˆä¸‰ï¼š.vueæ–‡ä»¶

## è·¯ç”±æ‡’åŠ è½½

æ‡’åŠ è½½ç®€å•æ¥è¯´å°±æ˜¯å»¶è¿ŸåŠ è½½æˆ–æŒ‰éœ€åŠ è½½ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™çš„æ—¶å€™è¿›è¡ŒåŠ è½½

```js
function load(component) {
    return () => import(`views/${component}`)
}
```

é€šè¿‡Webpackç¼–è¯‘æ‰“åŒ…åï¼Œä¼šæŠŠæ¯ä¸ªè·¯ç”±ç»„ä»¶çš„ä»£ç åˆ†å‰²æˆä¸€ä¸€ä¸ªjsæ–‡ä»¶ï¼Œåˆå§‹åŒ–æ—¶ä¸ä¼šåŠ è½½è¿™äº›jsæ–‡ä»¶ï¼Œåªå½“æ¿€æ´»è·¯ç”±ç»„ä»¶æ‰ä¼šå»åŠ è½½å¯¹åº”çš„jsæ–‡ä»¶

ä½œç”¨å°±æ˜¯webpackåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œå¯¹å¼‚æ­¥å¼•å…¥çš„åº“ä»£ç è¿›è¡Œä»£ç åˆ†å‰²æ—¶ï¼ˆéœ€è¦é…ç½®webpackçš„SplitChunkPluginæ’ä»¶ï¼‰ï¼Œä¸ºåˆ†å‰²åçš„ä»£ç å—å–å¾—åå­—

Vueä¸­è¿ç”¨importçš„æ‡’åŠ è½½è¯­å¥ä»¥åŠwebpackçš„é­”æ³•æ³¨é‡Šï¼Œåœ¨é¡¹ç›®è¿›è¡Œwebpackæ‰“åŒ…çš„æ—¶å€™ï¼Œå¯¹ä¸åŒæ¨¡å—è¿›è¡Œä»£ç åˆ†å‰²ï¼Œåœ¨é¦–å±åŠ è½½æ—¶ï¼Œç”¨åˆ°å“ªä¸ªæ¨¡å—å†åŠ è½½å“ªä¸ªæ¨¡å—ï¼Œå®ç°æ‡’åŠ è½½è¿›è¡Œé¡µé¢çš„ä¼˜åŒ–ã€‚

## å‡½æ•°å¼ç»„ä»¶

æ²¡æœ‰ç®¡ç†ä»»ä½•çŠ¶æ€ï¼Œä¹Ÿæ²¡æœ‰ç›‘å¬ä»»ä½•ä¼ é€’ç»™å®ƒçš„çŠ¶æ€ï¼Œä¹Ÿæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¥å—ä¸€äº› prop çš„å‡½æ•°ã€‚ç®€å•æ¥è¯´æ˜¯ ä¸€ä¸ªæ— çŠ¶æ€å’Œæ— å®ä¾‹çš„ç»„ä»¶

**renderå‡½æ•°çš„ç¬¬äºŒå‚æ•°contextï¼Œé€šè¿‡contextè¿›è¡Œä¸€åˆ‡å‚æ•°ä¼ é€’**

å‡½æ•°å¼ç»„ä»¶åªæ˜¯å‡½æ•°ï¼Œæ¸²æŸ“å¼€é”€å¾ˆä½

```vue
<script>
    export default {
        functional: true, // å‡½æ•°å¼ç»„ä»¶
        props: ["level", "title"],
        // headingç»„ä»¶
        // <heading :level="1" :title="title" icon="cart">{{title}}</heading>
        // <h2 title=""></h2>
        render(h, context) {
            // å­èŠ‚ç‚¹æ•°ç»„
            let children = [];
            // æ²¡æœ‰this,åŒæ ·ä¹Ÿæ²¡æœ‰$slot.default
            // é»˜è®¤æ’æ§½ï¼Œé»˜è®¤å­å…ƒç´ çš„å†™æ³•æœ‰æ‰€æ›´æ”¹
            children = children.concat(context.children);

            const { title, level } = context.props;
            return h(
                "h" + level, // å‚æ•°1ï¼Œtagname
                { attrs: { title } }, // å‚æ•°2ï¼š{ã€‚ã€‚ã€‚}é…ç½®çš„æ•°æ®å¯¹è±¡
                children // è™šæ‹Ÿå­èŠ‚ç‚¹VNodeä¸èƒ½å†ä½¿ç”¨$slot.default å­èŠ‚ç‚¹
            )
        }
    }
</script>

<style lang="scss" scoped>
</style>

```

## CDNä¼˜åŒ–

CDN(content delivery network)å†…å®¹åˆ†å‘ç½‘ç»œï¼Œè®¿é—®æœ€è¿‘æœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæ‰˜ç®¡ä¸€äº›webèµ„æºï¼ˆå›¾ç‰‡ã€æ–‡æœ¬å’Œè„šæœ¬ç­‰ï¼‰ï¼Œå¯ä¾›ä¸‹è½½çš„èµ„æºï¼ˆåª’ä½“æ–‡ä»¶ã€è½¯ä»¶ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œåº”ç”¨ç¨‹åºç­‰ã€‚å¯ç”¨CDNåŠ é€Ÿèµ„æºçš„è®¿é—®ã€‚

æ€§èƒ½æ–¹é¢ï¼šå»¶è¿Ÿæ›´ä½ï¼Œå†…å®¹åŠ è½½æ›´å¿«

å®‰å…¨æ–¹é¢ï¼šæœ‰åŠ©äºé˜²å¾¡DDosç­‰ç½‘ç»œæ”»å‡»

### CDNä¸DNSè§£æ

CDNå®é™…ä¸Šæ˜¯ä¸€ä¸ªå°±è¿‘è®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°dnsè§£æipåœ°å€è¿›è¡Œä¸€ä¸ªå®šä½ï¼Œè¿™æ ·å°±å¯ä»¥è®¿é—®æœ€è¿‘çš„CDNèŠ‚ç‚¹

**å…·ä½“DNSè§£æè¿‡ç¨‹ï¼š**

```
é¦–å…ˆå®¢æˆ·ç«¯ä¼šå‘é€ä¸€ä¸ªDNSè¯·æ±‚ç»™æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œæ£€æŸ¥ç¼“å­˜ï¼ˆæµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿå¦‚hostsã€è·¯ç”±å™¨ï¼‰æŸ¥æ‰¾åŸŸåï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å°±è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ã€‚æ ¹DNSæ”¶åˆ°è¯·æ±‚ï¼Œè¿”å›.com .cnçš„é¡¶çº§åŸŸåæœåŠ¡å™¨åœ°å€ï¼Œç„¶åç»§ç»­å‘é¡¶çº§åŸŸåæœåŠ¡å™¨å‘è¯·æ±‚ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨åˆè¿”å›æ¬¡çº§åŸŸåæœåŠ¡å™¨ï¼ˆæƒå¨åŸŸåæœåŠ¡å™¨ï¼‰ï¼Œæœ€ç»ˆå¾—åˆ°å¯¹åº”çš„ipåœ°å€ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ç¼“å­˜ç»“æœï¼Œè¿”å›ç»™å®¢æˆ·ç«¯
```

**CDNå·¥ä½œåŸç†**

```
DNSè§£æå¾—åˆ°å¯¹åº”çš„ipåœ°å€ï¼Œå‘æœ€è¿‘çš„CDNæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›å“åº”æ•°æ®
```

### å…·ä½“CDNåœ¨é¡¹ç›®ä¸­é…ç½®

åœ¨config.jsæ–‡ä»¶ä¸­é€šè¿‡externalsé…ç½®é¡¹è¿›è¡Œcdné…ç½®

é‡Œé¢è®¾ç½®éœ€è¦ç”¨åˆ°çš„cdnçš„åº“æ¯”å¦‚axiosã€el-ui

```js
module.exports = {
    configureWebpack: {
        externals:{
            'vue': 'Vue',
            'element-ui': 'ELEMENT',
            'quill': 'Quill'
        }
    },
}
```

## gzip

gzipå‹ç¼©æ˜¯ä¸€ç§httpè¯·æ±‚ä¼˜åŒ–æ–¹å¼ï¼Œé€šè¿‡å‡å°‘æ–‡ä»¶ä½“ç§¯æ¥æé«˜åŠ è½½é€Ÿåº¦ã€‚htmlã€cssã€jsæ–‡ä»¶ç”šè‡³jsonéƒ½å¯ä»¥ç”¨æ¥å‹ç¼©ï¼Œå¯ä»¥å‡å°60%ä»¥ä¸Šçš„ä½“ç§¯ã€‚å‰ç«¯é…ç½®gzipå‹ç¼©ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨nginxå¼€å¯gzipï¼Œå‡å°ç½‘ç»œä¼ è¾“çš„æµé‡

æ‰§è¡Œå‘½åï¼š`npm i compression-webpack-plugin -D`

```js
const CompressionWebpackPlugin = require('compression-webpack-plugin')

plugins: [
   new CompressionWebpackPlugin()
]
```

## Webpack

### webpackçš„ä½œç”¨

```
å¯ä»¥å°†ä¸åŒæ¨¡å—çš„æ–‡ä»¶æ‰“åŒ…æ•´åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”ä¿è¯ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ‰§è¡Œé¡ºåºã€‚åˆ©ç”¨æ‰“åŒ…å°±å¯ä»¥åœ¨å¼€å‘çš„æ—¶å€™æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åˆ’åˆ†æ–‡ä»¶æ¨¡å—ã€‚è¿˜å¯ä»¥åˆ©ç”¨loaderå’Œpluginå¯¹webpackåŠŸèƒ½çš„æ‹“å±•ï¼Œloaderæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸»è¦æ˜¯æ–‡ä»¶æ¨¡å—çš„è½¬åŒ–ï¼Œè¿”å›å¯æ‰§è¡Œçš„jsä»£ç æ¨¡å—ï¼Œpluginæ’ä»¶ä½œç”¨åœ¨æ•´ä¸ªwebpackçš„ç”Ÿå‘½å‘¨æœŸï¼Œä¼šç›‘å¬æŸäº›webpackçš„äº‹ä»¶ï¼Œå¯¹äº§ç‰©åšå‡ºä¸€äº›ç‰¹æ®Šçš„å¤„ç†ï¼Œä¾‹å¦‚ä»£ç å‹ç¼©ï¼Œtree-shakingç­‰
```

### webpackå·¥ä½œæµç¨‹

```
webpackçš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°æ‰§è¡Œä¼šä¾æ¬¡æ‰§è¡Œï¼Œå…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯webpack.config.jsï¼Œç„¶åè§£æå…¥å£æ–‡ä»¶åŠå…¶ä¾èµ–ï¼Œæ„å»ºæ•´ä¸ªä¾èµ–æ ‘ï¼Œå†è¿›è¡Œæ¨¡å—ç¼–è¯‘ï¼Œæ¯”å¦‚babelè¿›è¡ŒES6è¯­æ³•è½¬æ¢ï¼Œä½¿ç”¨css-loaderå¤„ç†cssæ–‡ä»¶ï¼Œç„¶åæ ¹æ®å…¥å£å’Œæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„Chunkï¼Œå†æŠŠChunkè½¬æ¢ä¸ºå•ç‹¬æ–‡ä»¶è¾“å‡ºèµ„æºï¼Œæœ€åæ ¹æ®é…ç½®çš„è¾“å‡ºè·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚
æ€»çš„æ¥è¯´webpackå°†å¤šä¸ªæ¨¡å—è¿›è¡Œè½¬æ¢å’Œæ‰“åŒ…ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºæ–‡ä»¶ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè¿›è¡Œå„ç§å¤„ç†å’Œä¼˜åŒ–ï¼Œä»¥æé«˜æ‰“åŒ…æ•ˆç‡å’Œè¾“å‡ºæ–‡ä»¶çš„æ€§èƒ½ã€‚
```

### æ¨¡å—åŒ–çš„å¥½å¤„

```
é¿å…å‘½åå†²çªï¼Œæ›´å¥½çš„åˆ†ç¦»ï¼ŒæŒ‰éœ€åŠ è½½ï¼Œæé«˜ç»´æŠ¤æ€§ï¼Œå¤ç”¨æ€§
```

## æ€§èƒ½ä¼˜åŒ–

> è·¯ç”±æ‡’åŠ è½½ï¼šå¦‚æœä¸åšå¤„ç†ï¼Œç”¨æˆ·æ‰“å¼€é¦–é¡µæ—¶ï¼Œä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰èµ„æºã€‚åˆ©ç”¨import()åŠ¨æ€å¯¼å…¥ï¼Œwebpackæ‰“åŒ…æ—¶ä¸ºç”Ÿæˆä¸€ä¸ªä¸ªchunkï¼Œåªæœ‰è¢«æ¿€æ´»çš„æ—¶å€™ä½¿ç”¨
>
> ç»„ä»¶æ‡’åŠ è½½
>
> tree-shaking
>
> éª¨æ¶å±ï¼šå¯ä»¥ç¼©çŸ­ç™½å±æ—¶é—´ï¼Œæå‡ç”¨æˆ·æ€§èƒ½ã€‚åŸç†ï¼šé¡¹ç›®åœ¨é¡¹ç›®æ‰“åŒ…æ—¶å†…å®¹æ”¾åˆ°htmlæ–‡ä»¶ä¸­idä¸ºappçš„divé‡Œï¼Œè¿›è¡Œä¸€ä¸ªæ›¿æ¢
>
> é•¿åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
>
> éª¨æ¶å±
>
> Web Worker ä¼˜åŒ–é•¿ä»»åŠ¡
>
> requestAnimationFrame åˆ¶ä½œåŠ¨ç”»ï¼šsetTimeout/setInterval å±äº `JSå¼•æ“`ï¼ŒrequestAnimationFrame å±äº `GUIå¼•æ“`
>
> å›¾ç‰‡ä¼˜åŒ–ï¼šæ‡’åŠ è½½ï¼Œè½¬base64
>
> å‡½æ•°å¼ç»„ä»¶ï¼šå› ä¸ºå‡½æ•°æ˜¯ç»„ä»¶é¡¾åæ€ä¹‰ä»–å°±æ˜¯ä¸ªå‡½æ•°ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸ª`renderå‡½æ•°`ï¼Œä»–å°‘äº†ç»„ä»¶åˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œçœå»äº†å¾ˆå¤šåˆå§‹åŒ–è¿‡ç¨‹çš„`å¼€é”€`

```
é¦–å…ˆæ€§èƒ½ä¼˜åŒ–å¯ä»¥åˆ†ä¸ºé¦–å±ä¼˜åŒ–å’Œè¿è¡Œæ—¶çš„ä¼˜åŒ–ã€‚å¯¹äºé¦–å±ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯ï¼Œæ¯”å¦‚è·¯ç”±æ‡’åŠ è½½ï¼Œå¦‚æœä¸åšå¤„ç†ï¼Œç”¨æˆ·æ‰“å¼€é¦–é¡µå°±ä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„èµ„æºï¼Œå¯ä»¥åˆ©ç”¨import()åŠ¨æ€å¯¼å…¥ï¼Œwebpackåœ¨æ‰“åŒ…æ—¶å°±ä¼šç”Ÿæˆä¸ºä¸€ä¸ªä¸ªchunkï¼Œåªæœ‰åœ¨è¢«æ¿€æ´»çš„æ—¶å€™æ‰ä¼šä½¿ç”¨ã€‚ç„¶åå¯ä»¥åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œåç«¯è¿”å›èµ„æºçš„æ—¶å€™è®¾ç½®cache-controlï¼Œexpireså­—æ®µï¼Œå‰ç«¯åˆç†çš„åˆ©ç”¨web storageï¼Œå‡½æ•°å¼ç»„ä»¶ï¼Œè¯´ç™½äº†å°±ä¸€ä¸ªrenderå‡½æ•°ï¼Œå°‘äº†ç»„ä»¶åŒ–åˆå§‹çš„è¿‡ç¨‹ï¼Œæ²¡æœ‰è‡ªå·±çš„å®ä¾‹ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œçœå»äº†åˆå§‹åŒ–çš„æ€§èƒ½å¼€é”€ã€‚è¿˜æœ‰åˆ©ç”¨cdnä¼˜åŒ–å˜›ï¼Œå°±æ˜¯å°±è¿‘è®¿é—®å˜›ï¼Œæ ¹æ®ä¸€ä¸ªdnsè§£æipåœ°å€è®¿é—®å°±è¿‘çš„æœåŠ¡å™¨ï¼ŒåŠ é€Ÿèµ„æºè®¿é—®ï¼Œè¿˜æœ‰gzipå‹ç¼©å‡å°‘æ–‡ä»¶ä½“ç§¯ã€‚å›¾ç‰‡çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡canvasè½¬base64ã€å­—ä½“å›¾æ ‡ç­‰
ä»£ç å±‚é¢è¿è¡Œæ—¶çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚è¯´ä¸€äº›é˜²æŠ–èŠ‚æµå¯¹äº‹ä»¶çš„ä¼˜åŒ–ã€å‡å°‘é¡µé¢é‡ç»˜é‡æ’ã€v-ifï¼Œv-foré¿å…ä¸€èµ·ä½¿ç”¨(v-forä¼˜å…ˆçº§æ¯”v-ifé«˜ï¼ŒåŒæ—¶ä½œç”¨ä¸€ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡æ¸²æŸ“å…ˆå¾ªç¯å†è¿›è¡Œåˆ¤æ–­ä¼šé€ æˆæ€§èƒ½æ–¹é¢çš„æµªè´¹)ï¼Œé•¿åˆ—è¡¨ä¼˜åŒ–ï¼Œwebworkers(åå°åŠ è½½)
```

## åä¸‡æ¡æ•°æ®å¦‚ä½•æ¸²æŸ“

[ä»€ä¹ˆï¼Ÿåç«¯è¦ä¸€æ¬¡æ€§è¿”å›æˆ‘10ä¸‡æ¡æ•°æ®ï¼ä¸”çœ‹æˆ‘è¿™8ç§æ–¹æ¡ˆæœºæ™ºåº”å¯¹ï¼ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7205101745936416829?searchId=202307181402159253F2A90269DEA1D8FA)

> - ç›´æ¥æ¸²æŸ“
> - ä½¿ç”¨å®šæ—¶å™¨åˆ†ç»„åˆ†æ‰¹ä¸€æ¬¡æ¸²æŸ“ï¼ˆå®šæ—¶åŠ è½½ï¼‰
> - ä½¿ç”¨requestAnimationFrameä»£æ›¿å®šæ—¶å™¨æ¸²æŸ“
> - æ­é…åˆ†é¡µç»„ä»¶ï¼Œåˆ†é¡µå±•ç¤º
> - è¡¨æ ¼æ»šåŠ¨è§¦åº•åŠ è½½
> - è™šæ‹Ÿåˆ—è¡¨
> - å¼€å¯å¤šçº¿ç¨‹ï¼ŒwebWorkeræ“ä½œ

## è®¾è®¡ä¸€ä¸ªå‰ç«¯ç»Ÿè®¡åŸ‹ç‚¹SDK

[èŠèŠä»¤äººå¤´ç–¼çš„åŸ‹ç‚¹ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7223584687100706853?searchId=20230806112906F1A424FA619E88236573)

[ğŸ”¥é¢è¯•å®˜ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªåŸ‹ç‚¹SDK - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7080797016086806536?searchId=20230806112906F1A424FA619E88236573#comment)

å‰ç«¯åŸ‹ç‚¹å¤§è‡´å¯åˆ†ä¸ºæ•°æ®ç›‘æ§ã€æ€§èƒ½ç›‘æ§ã€é”™è¯¯ç›‘æ§ã€‚å…¶ä¸­æ•°æ®ç›‘æ§åŒ…æ‹¬ç›‘æ§pvä»¥åŠè‡ªå®šä¹‰äº‹ä»¶çš„ç›‘æ§ã€‚æ€§èƒ½ç›‘æ§å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ç»™æˆ‘ä»¬æä¾›çš„performance apiã€‚è€Œé”™è¯¯ç›‘æ§æˆ‘ä»¬å¯ä»¥ç›‘å¬windowå¯¹è±¡çš„erroräº‹ä»¶ä»¥åŠç›‘å¬promiseæ²¡æœ‰catchæƒ…å†µçš„unhandlerejected apiã€‚å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬å¿…é¡»ä½¿ç”¨imgç­‰æ¥è¿›è¡Œè¯·æ±‚ï¼Œå› ä¸ºimgæ ‡ç­¾ä¸ä¼šè·¨åŸŸä¸”å…¼å®¹æ€§è¾ƒå¥½ã€‚æœ€åï¼Œreact/vueå†…éƒ¨æä¾›äº†ä¸€äº›apiå¦‚ComponentDidCatchï¼ˆreactï¼‰/errorCapturedï¼ˆvueï¼‰ç­‰apiæ–¹ä¾¿æˆ‘ä»¬è°ƒç”¨è‡ªå®šä¹‰äº‹ä»¶è¿›è¡Œå‘é€ã€‚
